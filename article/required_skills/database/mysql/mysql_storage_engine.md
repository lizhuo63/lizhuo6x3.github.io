# 各存储引擎特性

![](https://lizhuo-file.oss-cn-hangzhou.aliyuncs.com/img/Snipaste_2022-05-29_21-50-22.png)

# **InnoDB存储引擎**

+ 会将自增主键的记录暂存到内存中，机器重启后会丢失

+ InnoDB主要特性有：支持事务、行级锁和外键。

+ InnoDB是为处理巨大数据而设计的，它的CPU效率是其他引擎锁不能匹敌的。

+ InnoDB将表和索引维护在一个逻辑表空间中，表空间可以包含数个文件（或原始磁盘文件）。InnoDB表可以是任何尺寸，即使在文件尺寸被限制为2GB的操作系统上

+ InnoDB存储表中的数据时，每张表的存储都按主键顺序存放，如果没有指定主键，InnoDB会为每一行生成一个6字节的ROWID，并以此作为主键

使用InnoDB时，MySQL将在MySQL数据目录下创建一个名为ibdata1的10MB大小的自动扩展数据文件，以及两个名为ib_logfile0和ib_logfile1的5MB大小的日志文件。

场景：对事务的完整性要求比较高（比如银行），要求实现并发控制（比如售票），那选择InnoDB有很大的优势。如果需要频繁的更新、删除操作的数据库，也可以选择InnoDB，因为支持事务的提交（commit）和回滚（rollback）。

# **MyISAM存储引擎**

MyISAM基于ISAM存储引擎，它拥有较高的插入、查询速度，但不支持事物和外键。

MyISAM主要特性有：

+ 会将自增主键的记录持久化到文件中

+ 每个MyISAM表最大索引数是64，每个索引最大的列数是16。

+ 最大的键长是1000字节

+ BLOB和TEXT列可以被索引，支持FULLTEXT类型的索引，而InnoDB不支持这种类型的索引

+ NULL被允许在索引的列中，这个值占每个键的0~1个字节

+ 每个MyISAM类型的表都有一个AUTO_INCREMENT的内部列，因而MyISAM类型表的AUTO_INCREMENT列更新比InnoDB类型的AUTO_INCREMENT更快

+ 可以把数据文件和索引文件放在不同目录

+ VARCHAR和CHAR列可以多达64KB

存储格式：

1、静态表（默认）：字段都是定长的。存储非常迅速、容易缓存，出现故障容易恢复；占用空间通常比动态表多。

2、动态表：占用的空间相对较少，但是频繁的更新删除记录会产生碎片，需要定期执行optimize table或myisamchk -r命令来改善性能，而且出现故障的时候恢复比较困难。

3、压缩表：使用myisampack工具创建，占用非常小的磁盘空间。因为每个记录是被单独压缩的，所以只有非常小的访问开支。

使用MyISAM引擎创建数据库，将产生3个文件。文件的名字以表名字开始，扩展名之处文件类型：frm文件存储表定义、数据文件的扩展名为.MYD（MYData）、索引文件的扩展名时.MYI（MYIndex）。

场景：如果表主要是用于插入新记录和读出记录，那么选择MyISAM能实现处理高效率。